{"version":3,"file":"index.js","sources":["../src/utils/generateUniqueId.ts","../src/ReactRouter/View.tsx","../src/ReactRouter/RouteManagerContext.ts","../src/ReactRouter/ViewItemManager.tsx","../src/ReactRouter/ViewManager.tsx","../src/ReactRouter/NavManager.tsx","../src/ReactRouter/Router.tsx"],"sourcesContent":["export const generateUniqueId = () => {\n  const charPool = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  const charArray: string[] = [];\n  for(let i = 0; i < 10; i++) {\n    charArray.push(charPool[Math.floor(Math.random() * charPool.length)]);\n  }\n  return charArray.join('');\n};\n","import React from 'react';\nimport { IonLifeCycleContext } from '@ionic/react';\n\ntype Props = React.DetailedHTMLProps<React.HTMLAttributes<HTMLElement>, HTMLElement>;\n\ninterface InternalProps extends React.HTMLAttributes<HTMLElement> {\n  forwardedRef?: React.RefObject<HTMLElement>,\n};\n\ntype ExternalProps = Props & {\n  ref?: React.RefObject<HTMLElement>\n};\n\ninterface StackViewState {\n  ref: any;\n}\n\nclass ViewInternal extends React.Component<InternalProps, StackViewState> {\n  context!: React.ContextType<typeof IonLifeCycleContext>;\n\n  constructor(props: InternalProps) {\n    super(props);\n    this.state = {\n      ref: null\n    }\n  }\n\n  componentDidMount() {\n    const { forwardedRef } = this.props;\n    this.setState({ ref: forwardedRef });\n    if (forwardedRef && forwardedRef.current) {\n      forwardedRef.current.addEventListener('ionViewWillEnter', this.ionViewWillEnterHandler.bind(this));\n      forwardedRef.current.addEventListener('ionViewDidEnter', this.ionViewDidEnterHandler.bind(this));\n      forwardedRef.current.addEventListener('ionViewWillLeave', this.ionViewWillLeaveHandler.bind(this));\n      forwardedRef.current.addEventListener('ionViewDidLeave', this.ionViewDidLeaveHandler.bind(this));\n    }\n  }\n\n  componentWillUnmount() {\n    const { forwardedRef } = this.props;\n    if (forwardedRef && forwardedRef.current) {\n      forwardedRef.current.removeEventListener('ionViewWillEnter', this.ionViewWillEnterHandler.bind(this));\n      forwardedRef.current.removeEventListener('ionViewDidEnter', this.ionViewDidEnterHandler.bind(this));\n      forwardedRef.current.removeEventListener('ionViewWillLeave', this.ionViewWillLeaveHandler.bind(this));\n      forwardedRef.current.removeEventListener('ionViewDidLeave', this.ionViewDidLeaveHandler.bind(this));\n    }\n  }\n\n  ionViewWillEnterHandler() {\n    this.context.ionViewWillEnter();\n  }\n\n  ionViewDidEnterHandler() {\n    this.context.ionViewDidEnter();\n  }\n\n  ionViewWillLeaveHandler() {\n    this.context.ionViewWillLeave();\n  }\n\n  ionViewDidLeaveHandler() {\n    this.context.ionViewDidLeave();\n  }\n\n  render() {\n    const { className, children, forwardedRef, ...rest } = this.props;\n    const { ref } = this.state;\n    return (\n        <div\n          className={className ? `ion-page ${className}` : 'ion-page'}\n          ref={forwardedRef as any}\n          {...rest}\n        >\n          {ref && children}\n        </div>\n    )\n  }\n\n  static get contextType() {\n    return IonLifeCycleContext;\n  }\n}\n\nfunction forwardRef(props: InternalProps, ref: React.RefObject<HTMLElement>) {\n  return <ViewInternal forwardedRef={ref} {...props} />;\n}\nforwardRef.displayName = 'View';\n\nexport const View = /*@__PURE__*/React.forwardRef<HTMLElement, ExternalProps>(forwardRef as any);\n","import React, { ReactNode } from 'react';\nimport { NavDirection } from '@ionic/core';\nimport { ViewItem } from './ViewItem';\n\nexport interface ViewStack {\n  routerOutlet: HTMLIonRouterOutletElement;\n  activeId?: string,\n  views: ViewItem[]\n}\n\nexport interface ViewStacks {\n  [key: string]: ViewStack;\n}\n\nexport interface RouteManagerContextState {\n  hideView: (viewId: string) => void;\n  viewStacks: ViewStacks;\n  setupIonRouter: (id: string, children: ReactNode, routerOutlet: HTMLIonRouterOutletElement) => void;\n  removeViewStack: (stack: string) => void;\n  renderChild: (item: ViewItem) => void;\n  transitionView: (enteringEl: HTMLElement, leavingEl: HTMLElement, ionRouterOuter: HTMLIonRouterOutletElement, direction: NavDirection) => void;\n}\n\nexport const RouteManagerContext = /*@__PURE__*/React.createContext<RouteManagerContextState>({\n  viewStacks: {},\n  hideView: () => { navContextNotFoundError(); },\n  setupIonRouter: () => { navContextNotFoundError() },\n  removeViewStack: () => { navContextNotFoundError(); },\n  renderChild: () => { navContextNotFoundError(); },\n  transitionView: () => { navContextNotFoundError(); }\n});\n\nfunction navContextNotFoundError() {\n  console.error('IonReactRouter not found, did you add it to the app?')\n}\n","import React from 'react';\nimport { IonLifeCycleContext, DefaultIonLifeCycleContext } from '@ionic/react';\nimport { RouteManagerContext } from './RouteManagerContext';\n\ninterface StackItemManagerProps {\n  id: string;\n  mount: boolean;\n}\n\ninterface StackItemManagerState {\n  show: boolean;\n}\n\nexport class ViewItemManager extends React.Component<StackItemManagerProps, StackItemManagerState> {\n  ionLifeCycleContext = new DefaultIonLifeCycleContext();\n  _isMounted = false;\n  context!: React.ContextType<typeof RouteManagerContext>;\n\n  constructor(props: StackItemManagerProps) {\n    super(props)\n    this.state = {\n      show: true\n    };\n\n    this.ionLifeCycleContext.onComponentCanBeDestroyed(() => {\n      if (!this.props.mount) {\n        if (this._isMounted) {\n          this.setState({\n            show: false\n          }, () => {\n            this.context.hideView(this.props.id);\n          });\n        }\n      }\n    });\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  render() {\n    const { show } = this.state;\n    return (\n      <IonLifeCycleContext.Provider value={this.ionLifeCycleContext}>\n        {show && this.props.children}\n      </IonLifeCycleContext.Provider>\n    )\n  }\n\n  static get contextType() {\n    return RouteManagerContext;\n  }\n}\n","import React from 'react';\nimport { generateUniqueId } from '../utils';\nimport { View } from './View';\nimport { ViewItemManager } from './ViewItemManager';\nimport { RouteManagerContext } from './RouteManagerContext';\n\ndeclare global {\n  namespace JSX {\n    interface IntrinsicElements {\n      'ion-router-outlet': any;\n    }\n  }\n}\n\ntype ViewManagerProps = {\n  id?: string;\n};\n\ntype ViewManagerState = {}\n\nexport class ViewManager extends React.Component<ViewManagerProps, ViewManagerState> {\n  containerEl: React.RefObject<HTMLIonRouterOutletElement> = React.createRef();\n  context!: React.ContextType<typeof RouteManagerContext>;\n  id: string;\n\n  constructor(props: ViewManagerProps) {\n    super(props);\n    this.id = this.props.id || generateUniqueId();\n  }\n\n  componentDidMount() {\n    this.context.setupIonRouter(this.id, this.props.children, this.containerEl.current!);\n  }\n\n  componentWillUnmount() {\n    this.context.removeViewStack(this.id);\n  }\n\n  render() {\n    const context = this.context;\n    const viewStack = context.viewStacks[this.id];\n    const activeId = viewStack ? viewStack.activeId : '';\n    const views = (viewStack || { views: [] }).views.filter(x => x.show);\n    return (\n      <ion-router-outlet data-id={this.id} ref={this.containerEl}>\n        {views.map((item) => {\n          let props: any = {};\n          if (item.id === activeId) {\n            props = {\n              'className': ' ion-page-invisible'\n            };\n          }\n          return (\n            <ViewItemManager\n              id={item.id}\n              key={item.key}\n              mount={item.mount}\n            >\n              <View\n                ref={item.ref}\n                {...props}\n              >\n                {this.context.renderChild(item)}\n              </View>\n            </ViewItemManager>\n          );\n        })}\n      </ion-router-outlet>\n    );\n  }\n\n  static get contextType() {\n    return RouteManagerContext;\n  }\n}\n","import { RouterDirection } from '@ionic/core';\nimport { NavContext, NavContextState } from '@ionic/react';\nimport { Location as HistoryLocation, UnregisterCallback } from 'history';\nimport React from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { ViewManager } from './ViewManager';\n\ninterface NavManagerProps extends RouteComponentProps {\n  findViewInfoByLocation: (location: HistoryLocation) => any;\n  findViewInfoById: (id: string) => any;\n};\ninterface NavManagerState extends NavContextState {};\n\nexport class NavManager extends React.Component<NavManagerProps, NavManagerState> {\n\n  listenUnregisterCallback: UnregisterCallback;\n\n  constructor(props: NavManagerProps) {\n    super(props);\n    this.state = {\n      goBack: this.goBack.bind(this),\n      hasIonicRouter: () => true,\n      getHistory: this.getHistory.bind(this),\n      getLocation: this.getLocation.bind(this),\n      navigate: this.navigate.bind(this),\n      getViewManager: this.getViewManager.bind(this),\n      currentPath: this.props.location.pathname\n    }\n\n    this.listenUnregisterCallback = this.props.history.listen((location: HistoryLocation) => {\n      this.setState({\n        currentPath: location.pathname\n      })\n    });\n  }\n\n  componentWillUnmount() {\n    if(this.listenUnregisterCallback) {\n      this.listenUnregisterCallback();\n    }\n  }\n\n  goBack(defaultHref?: string) {\n    const { view: leavingView } = this.props.findViewInfoByLocation(this.props.location);\n    if (leavingView) {\n      const { view: enteringView } = this.props.findViewInfoById(leavingView.prevId);\n      if (enteringView) {\n        this.props.history.replace(enteringView.routeData.match.url, { direction: 'back' });\n      } else {\n        defaultHref && this.props.history.replace(defaultHref, { direction: 'back' });\n      }\n    } else {\n      defaultHref && this.props.history.replace(defaultHref, { direction: 'back' });\n    }\n  }\n\n  getHistory() {\n    return this.props.history as any;\n  }\n\n  getLocation() {\n    return this.props.location as any;\n  }\n\n  navigate(path: string, direction?: RouterDirection) {\n    this.props.history.push(path, { direction });\n  }\n\n  getViewManager() {\n    return ViewManager;\n  }\n\n  render() {\n    return (\n      <NavContext.Provider value={this.state}>\n        {this.props.children}\n      </NavContext.Provider>\n    );\n  }\n\n}\n","import { NavDirection } from '@ionic/core';\nimport { Action as HistoryAction, Location as HistoryLocation, UnregisterCallback } from 'history';\nimport React from 'react';\nimport { BrowserRouter, BrowserRouterProps, match, matchPath, Redirect, Route, RouteComponentProps, RouteProps, withRouter } from 'react-router-dom';\nimport { generateUniqueId } from '../utils';\nimport { NavManager } from './NavManager';\nimport { RouteManagerContext, RouteManagerContextState, ViewStack, ViewStacks } from './RouteManagerContext';\nimport { ViewItem } from './ViewItem';\n\ninterface RouterManagerProps extends RouteComponentProps { }\n\ninterface RouteManagerState extends RouteManagerContextState { }\n\ninterface IonRouteData {\n  match: match<{ tab: string }> | null;\n  childProps: RouteProps;\n}\n\nclass RouteManager extends React.Component<RouterManagerProps, RouteManagerState> {\n  listenUnregisterCallback: UnregisterCallback | undefined;\n  activeViewId?: string;\n  prevViewId?: string;\n\n  constructor(props: RouterManagerProps) {\n    super(props);\n    this.listenUnregisterCallback = this.props.history.listen(this.historyChange.bind(this));\n    this.state = {\n      viewStacks: {},\n      hideView: this.hideView.bind(this),\n      setupIonRouter: this.setupIonRouter.bind(this),\n      removeViewStack: this.removeViewStack.bind(this),\n      renderChild: this.renderChild.bind(this),\n      transitionView: this.transitionView.bind(this)\n    };\n  }\n\n  hideView(viewId: string) {\n    const viewStacks = Object.assign({}, this.state.viewStacks);\n    const { view } = this.findViewInfoById(viewId, viewStacks);\n    if (view) {\n      view.show = false;\n      view.key = generateUniqueId();\n      this.setState({\n        viewStacks\n      });\n    }\n  }\n\n  historyChange(location: HistoryLocation, action: HistoryAction) {\n    this.setActiveView(location, action);\n  }\n\n  findViewInfoByLocation(location: HistoryLocation, viewStacks: ViewStacks) {\n    let view: ViewItem<IonRouteData> | undefined;\n    let match: IonRouteData[\"match\"] | null | undefined;\n    let viewStack: ViewStack | undefined;\n    const keys = Object.keys(viewStacks);\n    keys.some(key => {\n      const vs = viewStacks[key];\n      return vs.views.some(x => {\n        const matchProps = {\n          exact: x.routeData.childProps.exact,\n          path: x.routeData.childProps.path || x.routeData.childProps.from,\n          component: x.routeData.childProps.component\n        };\n        match = matchPath(location.pathname, matchProps)\n        if (match) {\n          view = x;\n          viewStack = vs;\n          return true;\n        }\n        return false;\n      });\n    })\n\n    const result = { view, viewStack, match };\n    return result;\n  }\n\n  findViewInfoById(id: string, viewStacks: ViewStacks) {\n    let view: ViewItem<IonRouteData> | undefined;\n    let viewStack: ViewStack | undefined;\n    const keys = Object.keys(viewStacks);\n    keys.some(key => {\n      const vs = viewStacks[key];\n      view = vs.views.find(x => x.id === id);\n      if (view) {\n        viewStack = vs;\n        return true;\n      } else {\n        return false;\n      }\n    });\n    return { view, viewStack };\n  }\n\n  setActiveView(location: HistoryLocation, action: HistoryAction) {\n    const viewStacks = Object.assign({}, this.state.viewStacks);\n    const { view: enteringView, viewStack: enteringViewStack, match } = this.findViewInfoByLocation(location, viewStacks);\n    let direction: NavDirection = location.state && location.state.direction;\n\n    if (!enteringViewStack) {\n      return;\n    }\n\n    const { view: leavingView } = this.findViewInfoById(this.activeViewId!, viewStacks);\n\n    if (leavingView && leavingView.routeData.match!.url === location.pathname) {\n      return;\n    }\n\n    if (enteringView) {\n      /**\n       * If the page is being pushed into the stack by another view,\n       * record the view that originally directed to the new view for back button purposes.\n       */\n      if (!enteringView.show && action === 'PUSH') {\n        enteringView.prevId = leavingView && leavingView.id;\n      }\n\n      enteringView.show = true;\n      enteringView.mount = true;\n      enteringView.routeData.match = match!;\n      enteringViewStack.activeId = enteringView.id;\n      this.activeViewId = enteringView.id;\n\n      if (leavingView) {\n        this.prevViewId = leavingView.id\n        if (leavingView.routeData.match!.params.tab === enteringView.routeData.match.params.tab) {\n          if (action === 'PUSH') {\n            direction = direction || 'forward';\n          } else {\n            direction = direction || 'back';\n            leavingView.mount = false;\n          }\n        }\n        /**\n         * If the leaving view is a Redirect, take it out of the rendering phase.\n         */\n        if(leavingView.element.type === Redirect) {\n          leavingView.mount = false;\n          leavingView.show = false;\n        }\n\n\n        if (leavingView.element.type === Route && leavingView.element.props.render) {\n          if (leavingView.element.props.render().type === Redirect) {\n            leavingView.mount = false;\n            leavingView.show = false;\n          }\n        } else if (leavingView.element.type === Redirect) {\n          leavingView.mount = false;\n          leavingView.show = false;\n        }\n      }\n\n      this.setState({\n        viewStacks\n      }, () => {\n        const enteringEl = enteringView.ref && enteringView.ref.current ? enteringView.ref.current : undefined;\n        const leavingEl = leavingView && leavingView.ref && leavingView.ref.current ? leavingView.ref.current : undefined;\n        this.transitionView(\n          enteringEl!,\n          leavingEl!,\n          enteringViewStack.routerOutlet,\n          leavingEl && leavingEl.innerHTML !== '' ? direction : undefined!) // Don't animate from an empty view\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.listenUnregisterCallback && this.listenUnregisterCallback();\n  }\n\n  setupIonRouter(id: string, children: any, routerOutlet: HTMLIonRouterOutletElement) {\n    const views: ViewItem[] = [];\n    let activeId: string | undefined;\n    const ionRouterOutlet = React.Children.only(children) as React.ReactElement;\n\n    React.Children.forEach(ionRouterOutlet.props.children, (child: React.ReactElement) => {\n      views.push(createViewItem(child, this.props.history.location));\n    });\n\n    this.registerViewStack(id, activeId, views, routerOutlet, this.props.location);\n\n    function createViewItem(child: React.ReactElement<any>, location: HistoryLocation) {\n      const viewId = generateUniqueId();\n      const key = generateUniqueId();\n      const element = child;\n      const matchProps = {\n        exact: child.props.exact,\n        path: child.props.path || child.props.from,\n        component: child.props.component\n      };\n      const match: IonRouteData['match'] = matchPath(location.pathname, matchProps);\n      const view: ViewItem<IonRouteData> = {\n        id: viewId,\n        key,\n        routeData: {\n          match,\n          childProps: child.props\n        },\n        element,\n        mount: true,\n        show: !!match,\n        ref: React.createRef()\n      };\n      if (!!match) {\n        activeId = viewId;\n      };\n      return view;\n    }\n  }\n\n  registerViewStack(stack: string, activeId: string | undefined, stackItems: ViewItem[], routerOutlet: HTMLIonRouterOutletElement, location: HistoryLocation) {\n    this.setState((prevState) => {\n      const prevViewStacks = Object.assign({}, prevState.viewStacks);\n      prevViewStacks[stack] = {\n        activeId: activeId,\n        views: stackItems,\n        routerOutlet\n      };\n      return {\n        viewStacks: prevViewStacks\n      };\n    }, () => {\n      const { view: activeView } = this.findViewInfoById(activeId!, this.state.viewStacks);\n\n      if (activeView) {\n        this.prevViewId = this.activeViewId;\n        this.activeViewId = activeView.id;\n        const direction = location.state && location.state.direction;\n        const { view: prevView } = this.findViewInfoById(this.prevViewId!, this.state.viewStacks);\n        this.transitionView(\n          activeView.ref!.current!,\n          prevView && prevView.ref!.current || undefined!,\n          routerOutlet,\n          direction);\n      }\n    });\n  };\n\n  removeViewStack(stack: string) {\n    const viewStacks = Object.assign({}, this.state.viewStacks);\n    delete viewStacks[stack];\n    this.setState({\n      viewStacks\n    });\n  }\n\n  renderChild(item: ViewItem<IonRouteData>) {\n    const component = React.cloneElement(item.element, {\n      computedMatch: item.routeData.match\n    });\n    return component;\n  }\n\n  findActiveView(views: ViewItem[]) {\n    let view: ViewItem<IonRouteData> | undefined;\n    views.some(x => {\n      const match = matchPath(this.props.location.pathname, x.routeData.childProps)\n      if (match) {\n        view = x;\n        return true;\n      }\n      return false;\n    });\n    return view;\n  }\n\n  transitionView(enteringEl: HTMLElement, leavingEl: HTMLElement, ionRouterOuter: HTMLIonRouterOutletElement, direction: NavDirection) {\n    /**\n     * Super hacky workaround to make sure ionRouterOutlet is available\n     * since transitionView might be called before IonRouterOutlet is fully mounted\n     */\n    if (ionRouterOuter && ionRouterOuter.componentOnReady) {\n      this.commitView(enteringEl, leavingEl, ionRouterOuter, direction);\n    } else {\n      setTimeout(() => {\n        this.transitionView(enteringEl, leavingEl, ionRouterOuter, direction);\n      }, 10);\n    }\n  }\n\n  private async commitView(enteringEl: HTMLElement, leavingEl: HTMLElement, ionRouterOuter: HTMLIonRouterOutletElement, direction: NavDirection) {\n    await ionRouterOuter.commit(enteringEl, leavingEl, {\n      deepWait: true,\n      duration: direction === undefined ? 0 : undefined,\n      direction: direction,\n      showGoBack: direction === 'forward',\n      progressAnimation: false\n    });\n\n    if (leavingEl && (enteringEl !== leavingEl)) {\n      /**\n       *  add hidden attributes\n      */\n      leavingEl.classList.add('ion-page-hidden');\n      leavingEl.setAttribute('aria-hidden', 'true');\n    }\n  }\n\n  render() {\n    return (\n      <RouteManagerContext.Provider value={this.state}>\n        <NavManager {...this.props}\n          findViewInfoById={(id: string) => this.findViewInfoById(id, this.state.viewStacks)}\n          findViewInfoByLocation={(location: HistoryLocation) => this.findViewInfoByLocation(location, this.state.viewStacks)}\n        >\n          {this.props.children}\n        </NavManager>\n      </RouteManagerContext.Provider>\n    );\n  }\n};\n\nconst RouteManagerWithRouter = withRouter(RouteManager);\nRouteManagerWithRouter.displayName = 'RouteManager';\n\nexport class IonReactRouter extends React.Component<BrowserRouterProps> {\n  render() {\n    const { children, ...props } = this.props;\n    return (\n      <BrowserRouter {...props}>\n        <RouteManagerWithRouter>{children}</RouteManagerWithRouter>\n      </BrowserRouter>\n    );\n  }\n}\n"],"names":["IonLifeCycleContext","DefaultIonLifeCycleContext","NavContext","matchPath","Redirect","Route","withRouter","BrowserRouter"],"mappings":"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"}